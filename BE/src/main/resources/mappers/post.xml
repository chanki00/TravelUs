<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.DB_PASSWORD_REDACTED.trip.repository.PostRepository">

	<insert id="createRecruitPost" parameterType="com.DB_PASSWORD_REDACTED.trip.dto.Post" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO Posts (
      plan_id,
      user_id,
      start_date,
      end_date,
      title,
      content,
      current_members,
      personalityTags,
      chatroom_id
    )
    VALUES (
      #{planId},
      #{userId},
      #{startDate},
      #{endDate},
      #{title},
      #{content},
      #{currentMembers},
      #{personalityTags},
      #{chatroomId}
    )
  </insert>
   <select id="getALlRecruitPost" resultType="com.DB_PASSWORD_REDACTED.trip.dto.Post">
    SELECT
      id,
      plan_id AS planId,
      user_id AS userId,
      start_date AS startDate,
      end_date AS endDate,
      title,
      content,
      current_members AS currentMembers,
      personalityTags AS personalityTags,
      created_at AS createdAt,
      updated_at AS updatedAt,
      chatroom_id AS chatroomId
    FROM Posts
    ORDER BY created_at DESC
  </select>
    <delete id="deleteRecruitPost" parameterType="int">
        DELETE FROM posts
        WHERE id = #{postId}
    </delete>
</mapper>
